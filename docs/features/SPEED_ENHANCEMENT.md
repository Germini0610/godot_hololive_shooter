# 速度感與移動距離增強

## 修改目標

1. **增加移動距離** - 讓單位飛得更遠
2. **呈現速度感** - 添加視覺效果展現高速移動

## 主要修改

### 1. 物理參數調整

#### Linear Damp（線性阻尼）: 0.6 → 0.3
**作用**: 減少阻尼讓單位移動更遠
```
修改前: linear_damp = 0.6 (較快減速)
修改後: linear_damp = 0.3 (較慢減速)
效果: 移動距離增加約 2 倍
```

#### Angular Damp（角度阻尼）: 3.0 → 2.0
**作用**: 減少旋轉阻尼，碰撞時更有動感
```
修改前: angular_damp = 3.0
修改後: angular_damp = 2.0
效果: 碰撞時旋轉更持久
```

#### Stop Velocity Threshold（停止閾值）: 100.0 → 50.0
**作用**: 降低停止閾值，允許更長的滑行
```
修改前: STOP_VELOCITY_THRESHOLD = 100.0
修改後: STOP_VELOCITY_THRESHOLD = 50.0
效果: 單位會持續移動更長時間
```

#### Max Speed（最大速度）: 2000.0 → 2500.0
**作用**: 提高最大速度上限
```
修改前: MAX_SPEED = 2000.0
修改後: MAX_SPEED = 2500.0
效果: 發射時速度可以更快（+25%）
```

### 2. 發射力道調整

#### 最小發射力道: 250 → 300
#### 最大發射力道: 2000 → 2500
#### 力道倍率: 2.0 → 2.5
```gdscript
修改前:
MIN_LAUNCH_POWER = 250.0
MAX_LAUNCH_POWER = 2000.0
POWER_SCALE = 2.0

修改後:
MIN_LAUNCH_POWER = 300.0
MAX_LAUNCH_POWER = 2500.0
POWER_SCALE = 2.5
```

**效果**:
- 拖曳同樣距離，發射力道增強 25%
- 整體速度感提升

### 3. 視覺效果：動態軌跡

新增了高速移動時的軌跡效果，讓速度感更明顯。

#### 軌跡特性
- **觸發條件**: 速度 > 500 時顯示
- **軌跡長度**: 10 個點
- **顏色**: 根據單位屬性顯示不同顏色
  - RED（紅色）：紅色軌跡
  - BLUE（藍色）：藍色軌跡
  - GREEN（綠色）：綠色軌跡
  - BLACK（黑色）：深灰軌跡
  - WHITE（白色）：白色軌跡
  - GOLD（金色）：金色軌跡
  - SILVER（銀色）：銀色軌跡
- **漸變效果**: 軌跡從透明到實色，營造動態感
- **寬度變化**: 軌跡由細到粗

#### 軌跡參數
```gdscript
const TRAIL_LENGTH: int = 10              # 軌跡點數量
const TRAIL_SPAWN_DISTANCE: float = 15.0  # 每隔 15 像素添加一個點
```

#### 軌跡顏色示例
```gdscript
RED:    Color(1.0, 0.3, 0.3, alpha * 0.6)
BLUE:   Color(0.3, 0.5, 1.0, alpha * 0.6)
GREEN:  Color(0.3, 1.0, 0.3, alpha * 0.6)
BLACK:  Color(0.3, 0.3, 0.3, alpha * 0.6)
WHITE:  Color(1.0, 1.0, 1.0, alpha * 0.6)
GOLD:   Color(1.0, 0.84, 0.0, alpha * 0.6)
SILVER: Color(0.75, 0.75, 0.75, alpha * 0.6)
```

## 修改的檔案

### 場景檔案
1. **scenes/Unit.tscn** - 玩家單位
   - `linear_damp: 0.6 → 0.3`
   - `angular_damp: 3.0 → 2.0`

2. **scenes/Enemy.tscn** - 敵人單位
   - `linear_damp: 0.6 → 0.3`
   - `angular_damp: 3.0 → 2.0`

### 腳本檔案
3. **scripts/Unit.gd** - 單位邏輯
   - `STOP_VELOCITY_THRESHOLD: 100.0 → 50.0`
   - `MAX_SPEED: 2000.0 → 2500.0`
   - 新增軌跡系統變數
   - 新增 `_update_trail()` 函數
   - 新增 `_draw()` 函數繪製軌跡

4. **scripts/BattleController.gd** - 戰鬥控制器
   - `MIN_LAUNCH_POWER: 250.0 → 300.0`
   - `MAX_LAUNCH_POWER: 2000.0 → 2500.0`
   - `POWER_SCALE: 2.0 → 2.5`

## 移動距離對比

### 修改前
```
發射（拖曳 200px）
速度: 400
移動距離: 約 300px
移動時間: 約 1.5 秒
視覺: 平淡，無特效
```

### 修改後
```
發射（拖曳 200px）
速度: 500
移動距離: 約 600px
移動時間: 約 2.5 秒
視覺: 帶彩色軌跡，速度感強烈
```

## 速度曲線對比

### 修改前（快速減速）
```
速度
2000 ━━╮
1500    ╲
1000     ╲
 500      ╲_
   0        ╲___ 時間
    |←短距離→|
```

### 修改後（緩慢減速）
```
速度
2500 ━━━━╮
2000      ╲
1500       ╲
1000        ╲
 500         ╲___
   0             ╲_____ 時間
    |←── 長距離 ──→|
```

## 測試建議

### 測試 1: 基本移動
1. 發射單位，觀察移動距離
2. 預期：移動距離約為修改前的 2 倍
3. 預期：高速時出現彩色軌跡

### 測試 2: 碰撞反彈
1. 向牆壁發射單位
2. 預期：反彈後仍保持較高速度
3. 預期：反彈時軌跡持續顯示

### 測試 3: 速度感
1. 以最大力道發射
2. 預期：看到明顯的軌跡拖尾
3. 預期：軌跡顏色與單位屬性一致

### 測試 4: 敵人碰撞
1. 碰撞敵人並造成傷害
2. 預期：碰撞後單位繼續移動
3. 預期：軌跡效果持續

## 微調參數

如果覺得移動距離太遠或太近，可以調整以下參數：

### 移動距離更遠
```gdscript
linear_damp = 0.2          # 更小的阻尼
STOP_VELOCITY_THRESHOLD = 30.0  # 更低的閾值
MAX_LAUNCH_POWER = 3000.0  # 更大的力道
```

### 移動距離更近
```gdscript
linear_damp = 0.4          # 更大的阻尼
STOP_VELOCITY_THRESHOLD = 80.0  # 更高的閾值
MAX_LAUNCH_POWER = 2000.0  # 較小的力道
```

### 軌跡更明顯
```gdscript
const TRAIL_LENGTH: int = 15        # 更長的軌跡
const TRAIL_SPAWN_DISTANCE: float = 10.0  # 更密集的點
```

### 軌跡更淡
```gdscript
const TRAIL_LENGTH: int = 5         # 更短的軌跡
const TRAIL_SPAWN_DISTANCE: float = 20.0  # 更稀疏的點
```

## 效果總結

✅ **移動距離增加**: 約 2 倍
✅ **速度感提升**: 添加彩色軌跡
✅ **視覺衝擊**: 高速移動時效果明顯
✅ **屬性識別**: 軌跡顏色對應單位屬性
✅ **動態效果**: 軌跡漸變消失
✅ **性能優化**: 僅在高速時渲染

**現在單位會移動得更遠，並帶有炫目的速度軌跡效果！**
